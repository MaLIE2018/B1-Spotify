<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
    <link rel="stylesheet" href="./css/style.css" />

    <script src="https://unpkg.com/ionicons@5.4.0/dist/ionicons.js"></script>

    <title>Hello, world</title>
</head>

<body id="body">
    <!-- main -->
    <div class="homepage col py-3 px-5">
        <nav class="navbar navbar-expand-lg navbar-dark col-12">
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav mx-auto">
                    <a class="nav-link active mx-3 position-relative" href="#" id="trending">TRENDING<span class="sr-only">(current)</span></a>
                    <a class="nav-link mx-3 position-relative" href="#">PODCAST</a>
                    <a class="nav-link mx-3 position-relative" href="#">MOOD AND GENRES</a>
                    <a class="nav-link mx-3 position-relative" href="#" tabindex="-1" aria-disabled="true">NEW RELEASES</a>
                    <a class="nav-link mx-3 position-relative" href="#" tabindex="-1" aria-disabled="true">DISCOVER</a
              >
            </div>
          </div>
        </nav>
        
      <!-- H1 -->
      <h1 id="h1" class="pt-3">#THROWBACKTHURSTAY</h1>
      <!-- H1  -->
      <div class="row" id="albums"></div>
      <!-- cards2 -->
    </div>
    <div class="col px-5">
      <!-- H2  -->
      <h2 id="h2" class="pt-5">Classifiche</h2>
      <!-- H2  -->
      <div class="row">
        <div
          id="img-card"
          class="card col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"
        >
          <img
            class="img-fluid cardHoover"
            src="./assets/img/Slice 7.png"
            alt=""
          />
          <span
            id="card-text"
            class="card-body d-flex justify-content-center pt-2"
            >Italian karaoke</span
          >
          <button class="artist-album-card-button btn rounded-circle">
            <ion-icon class="text-white" name="play"></ion-icon>
          </button>
        </div>
        <div
          id="img-card"
          class="card col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"
        >
          <img
            class="img-fluid cardHoover"
            src="./assets/img/Slice 8.png"
            alt=""
          />
          <span
            id="card-text"
            class="card-body d-flex justify-content-center pt-2"
            >Lyricist</span
          >
          <button class="artist-album-card-button btn rounded-circle">
            <ion-icon class="text-white" name="play"></ion-icon>
          </button>
        </div>
        <div
          id="img-card"
          class="card col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"
        >
          <img
            class="img-fluid cardHoover"
            src="./assets/img/Slice 9.png"
            alt=""
          />
          <span
            id="card-text"
            class="card-body d-flex justify-content-center pt-2"
            >Italy's Frequent Rotation</span
          >
          <button class="artist-album-card-button btn rounded-circle">
            <ion-icon class="text-white" name="play"></ion-icon>
          </button>
        </div>
        <div
          id="img-card"
          class="card col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"
        >
          <img
            class="img-fluid cardHoover"
            src="./assets/img/Slice 10.png"
            alt=""
          />
          <span
            id="card-text"
            class="card-body d-flex justify-content-center pt-2"
            >00s Italy</span
          >
          <button class="artist-album-card-button btn rounded-circle">
            <ion-icon class="text-white" name="play"></ion-icon>
          </button>
        </div>
      </div>
    </div>

    <!-- cards -->
    <script>
      //mycodehere!!!!!!!!!!!!!!!!!!!!!!!!!!!
      const getToAlbumpage = (id) => {
        sessionStorage.setItem("id",id)
        window.location.href = "albumpage.html"
      }


      window.onload = () => {
        fetch(
          'https://deezerdevs-deezer.p.rapidapi.com/artist/412/top?limit=50',
          {
            method: 'GET',
            headers: {
              'x-rapidapi-key':
                'e88938dcfcmsh276f73df3fb1e5ep1a09e1jsn71c6fe23b716',
              'x-rapidapi-host': 'deezerdevs-deezer.p.rapidapi.com',
            },
          }
        )
          .then((resp) => resp.json())
          .then((jsonobj) => {
            console.log(jsonobj);
            let dataArray = jsonobj.data;
            // let albums = dataArray.reduce((acc,curr)=>{
            //   if(acc[curr.album.id] === null){
            //     return [...acc,curr.album]
            //   }
            // },[])
            let albums = []
            dataArray.forEach(function(album){
                var i = albums.findIndex(x => x.id === album.album.id)
                if(i <= -1){
                  albums.push({id: album.album.id, cover: album.album.cover_big, title: album.album.title})
                }
            })            
            
            const myDiv = document.getElementById('albums');
            myDiv.innerHTML = albums.map((album) => {
                    return  `<div
                              id="img-card"
                              class="card col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                              <a href="#" id=${album.id} onclick="getToAlbumpage(this.id)">
                              <img
                                class="img-fluid cardHoover"
                                src="${album.cover}"
                                alt=""/>
                              <span
                                id="card-text"
                                class="card-body d-flex justify-content-center pt-2"
                                >${album.title}</span
                              >
                              <button class="artist-album-card-button btn rounded-circle">
                                <ion-icon class="text-white" name="play"></ion-icon>
                              </button>
                            </a>
                </div>`}).join(''); }) .catch((err) => console.log(err.message)); };
                </script>
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
</body>

</html>